{"ast":null,"code":"import React,{useState}from'react';import'./PingControls.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PingControls=_ref=>{let{groupCode,onPing,onLeaveGroup}=_ref;const[meetMessage,setMeetMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const handlePing=async type=>{if(isLoading)return;setIsLoading(true);if(!navigator.geolocation){alert('Geolocation is not supported by this browser');setIsLoading(false);return;}navigator.geolocation.getCurrentPosition(async position=>{const ping={type,latitude:position.coords.latitude,longitude:position.coords.longitude,message:type==='meet'?meetMessage:'',group_code:groupCode,timestamp:new Date().toISOString()};try{await onPing(ping);if(type==='meet')setMeetMessage('');}catch(error){console.error('Ping failed:',error);}finally{setIsLoading(false);}},error=>{console.error('Geolocation error:',error);alert('Unable to get your location. Please enable location services.');setIsLoading(false);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ping-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"group-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"group-name\",children:[\"Group: \",groupCode]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLeaveGroup,className:\"leave-group-btn\",title:\"Leave Group\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ping-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('here'),disabled:isLoading,className:\"ping-btn ping-here\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83D\\uDCCD\"}),\"I'm Here\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('sos'),disabled:isLoading,className:\"ping-btn ping-sos\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83C\\uDD98\"}),\"SOS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meet-section\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:meetMessage,onChange:e=>setMeetMessage(e.target.value),placeholder:\"Where should we meet? (optional)\",className:\"meet-input\",maxLength:100,disabled:isLoading}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('meet'),disabled:isLoading,className:\"ping-btn ping-meet\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83E\\uDD1D\"}),\"Meet Me\"]})]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Getting location...\"})]})]});};export default PingControls;","map":{"version":3,"names":["React","useState","jsxs","_jsxs","jsx","_jsx","PingControls","_ref","groupCode","onPing","onLeaveGroup","meetMessage","setMeetMessage","isLoading","setIsLoading","handlePing","type","navigator","geolocation","alert","getCurrentPosition","position","ping","latitude","coords","longitude","message","group_code","timestamp","Date","toISOString","error","console","enableHighAccuracy","timeout","maximumAge","className","children","onClick","title","disabled","value","onChange","e","target","placeholder","maxLength"],"sources":["/Users/jwono/Downloads/snowping-pwa/src/components/PingControls.js"],"sourcesContent":["import React, { useState } from 'react'\nimport './PingControls.css'\n\nconst PingControls = ({ groupCode, onPing, onLeaveGroup }) => {\n  const [meetMessage, setMeetMessage] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n\n  const handlePing = async (type) => {\n    if (isLoading) return\n    \n    setIsLoading(true)\n    \n    if (!navigator.geolocation) {\n      alert('Geolocation is not supported by this browser')\n      setIsLoading(false)\n      return\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const ping = {\n          type,\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          message: type === 'meet' ? meetMessage : '',\n          group_code: groupCode,\n          timestamp: new Date().toISOString()\n        }\n\n        try {\n          await onPing(ping)\n          if (type === 'meet') setMeetMessage('')\n        } catch (error) {\n          console.error('Ping failed:', error)\n        } finally {\n          setIsLoading(false)\n        }\n      },\n      (error) => {\n        console.error('Geolocation error:', error)\n        alert('Unable to get your location. Please enable location services.')\n        setIsLoading(false)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 300000\n      }\n    )\n  }\n\n  return (\n    <div className=\"ping-controls\">\n      <div className=\"group-header\">\n        <h3 className=\"group-name\">Group: {groupCode}</h3>\n        <button \n          onClick={onLeaveGroup} \n          className=\"leave-group-btn\"\n          title=\"Leave Group\"\n        >\n          ‚úï\n        </button>\n      </div>\n\n      <div className=\"ping-buttons\">\n        <button \n          onClick={() => handlePing('here')}\n          disabled={isLoading}\n          className=\"ping-btn ping-here\"\n        >\n          <span className=\"ping-icon\">üìç</span>\n          I'm Here\n        </button>\n\n        <button \n          onClick={() => handlePing('sos')}\n          disabled={isLoading}\n          className=\"ping-btn ping-sos\"\n        >\n          <span className=\"ping-icon\">üÜò</span>\n          SOS\n        </button>\n      </div>\n\n      <div className=\"meet-section\">\n        <input\n          type=\"text\"\n          value={meetMessage}\n          onChange={(e) => setMeetMessage(e.target.value)}\n          placeholder=\"Where should we meet? (optional)\"\n          className=\"meet-input\"\n          maxLength={100}\n          disabled={isLoading}\n        />\n        <button \n          onClick={() => handlePing('meet')}\n          disabled={isLoading}\n          className=\"ping-btn ping-meet\"\n        >\n          <span className=\"ping-icon\">ü§ù</span>\n          Meet Me\n        </button>\n      </div>\n\n      {isLoading && (\n        <div className=\"loading-indicator\">\n          <div className=\"spinner\"></div>\n          <span>Getting location...</span>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default PingControls"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}