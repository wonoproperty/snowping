{"ast":null,"code":"import React,{useState}from'react';import'./PingControls.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PingControls=_ref=>{let{groupCode,username,userId,onPing,onLeaveGroup}=_ref;const[meetMessage,setMeetMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const handlePing=async type=>{if(isLoading)return;setIsLoading(true);if(!navigator.geolocation){alert('Geolocation is not supported by this browser');setIsLoading(false);return;}navigator.geolocation.getCurrentPosition(async position=>{const ping={type,latitude:position.coords.latitude,longitude:position.coords.longitude,message:type==='meet'?meetMessage:'',group_code:groupCode,username:username,user_id:userId,timestamp:new Date().toISOString()};try{await onPing(ping);if(type==='meet')setMeetMessage('');}catch(error){console.error('Ping failed:',error);}finally{setIsLoading(false);}},error=>{console.error('Geolocation error:',error);alert('Unable to get your location. Please enable location services.');setIsLoading(false);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ping-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"group-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"group-info\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"group-name\",children:[\"Group: \",groupCode]}),/*#__PURE__*/_jsxs(\"p\",{className:\"username-display\",children:[\"Signed in as: \",username]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLeaveGroup,className:\"leave-group-btn\",title:\"Leave Group\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ping-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('here'),disabled:isLoading,className:\"ping-btn ping-here\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83D\\uDCCD\"}),\"I'm Here\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('sos'),disabled:isLoading,className:\"ping-btn ping-sos\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83C\\uDD98\"}),\"SOS\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meet-section\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:meetMessage,onChange:e=>setMeetMessage(e.target.value),placeholder:\"Where should we meet? (optional)\",className:\"meet-input\",maxLength:100,disabled:isLoading}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handlePing('meet'),disabled:isLoading,className:\"ping-btn ping-meet\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ping-icon\",children:\"\\uD83E\\uDD1D\"}),\"Meet Me\"]})]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Getting location...\"})]})]});};export default PingControls;","map":{"version":3,"names":["React","useState","jsxs","_jsxs","jsx","_jsx","PingControls","_ref","groupCode","username","userId","onPing","onLeaveGroup","meetMessage","setMeetMessage","isLoading","setIsLoading","handlePing","type","navigator","geolocation","alert","getCurrentPosition","position","ping","latitude","coords","longitude","message","group_code","user_id","timestamp","Date","toISOString","error","console","enableHighAccuracy","timeout","maximumAge","className","children","onClick","title","disabled","value","onChange","e","target","placeholder","maxLength"],"sources":["/Users/jwono/Downloads/snowping-pwa/src/components/PingControls.js"],"sourcesContent":["import React, { useState } from 'react'\nimport './PingControls.css'\n\nconst PingControls = ({ groupCode, username, userId, onPing, onLeaveGroup }) => {\n  const [meetMessage, setMeetMessage] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n\n  const handlePing = async (type) => {\n    if (isLoading) return\n    \n    setIsLoading(true)\n    \n    if (!navigator.geolocation) {\n      alert('Geolocation is not supported by this browser')\n      setIsLoading(false)\n      return\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const ping = {\n          type,\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          message: type === 'meet' ? meetMessage : '',\n          group_code: groupCode,\n          username: username,\n          user_id: userId,\n          timestamp: new Date().toISOString()\n        }\n\n        try {\n          await onPing(ping)\n          if (type === 'meet') setMeetMessage('')\n        } catch (error) {\n          console.error('Ping failed:', error)\n        } finally {\n          setIsLoading(false)\n        }\n      },\n      (error) => {\n        console.error('Geolocation error:', error)\n        alert('Unable to get your location. Please enable location services.')\n        setIsLoading(false)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 300000\n      }\n    )\n  }\n\n  return (\n    <div className=\"ping-controls\">\n      <div className=\"group-header\">\n        <div className=\"group-info\">\n          <h3 className=\"group-name\">Group: {groupCode}</h3>\n          <p className=\"username-display\">Signed in as: {username}</p>\n        </div>\n        <button \n          onClick={onLeaveGroup} \n          className=\"leave-group-btn\"\n          title=\"Leave Group\"\n        >\n          ‚úï\n        </button>\n      </div>\n\n      <div className=\"ping-buttons\">\n        <button \n          onClick={() => handlePing('here')}\n          disabled={isLoading}\n          className=\"ping-btn ping-here\"\n        >\n          <span className=\"ping-icon\">üìç</span>\n          I'm Here\n        </button>\n\n        <button \n          onClick={() => handlePing('sos')}\n          disabled={isLoading}\n          className=\"ping-btn ping-sos\"\n        >\n          <span className=\"ping-icon\">üÜò</span>\n          SOS\n        </button>\n      </div>\n\n      <div className=\"meet-section\">\n        <input\n          type=\"text\"\n          value={meetMessage}\n          onChange={(e) => setMeetMessage(e.target.value)}\n          placeholder=\"Where should we meet? (optional)\"\n          className=\"meet-input\"\n          maxLength={100}\n          disabled={isLoading}\n        />\n        <button \n          onClick={() => handlePing('meet')}\n          disabled={isLoading}\n          className=\"ping-btn ping-meet\"\n        >\n          <span className=\"ping-icon\">ü§ù</span>\n          Meet Me\n        </button>\n      </div>\n\n      {isLoading && (\n        <div className=\"loading-indicator\">\n          <div className=\"spinner\"></div>\n          <span>Getting location...</span>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default PingControls"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}