{"ast":null,"code":"var _jsxFileName = \"/Users/jwono/Downloads/snowping-pwa/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './MapComponent.css';\n\n// Fix for default markers in Leaflet with React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png'\n});\nconst MapComponent = ({\n  pings = []\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  useEffect(() => {\n    if (!mapInstanceRef.current && mapRef.current) {\n      // Initialize map\n      mapInstanceRef.current = L.map(mapRef.current).setView([-37.1, 147.1], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '¬© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(mapInstanceRef.current);\n    }\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      mapInstanceRef.current.removeLayer(marker);\n    });\n    markersRef.current = [];\n\n    // Add new markers\n    pings.forEach(ping => {\n      const icon = getPingIcon(ping.type);\n      const marker = L.marker([ping.latitude, ping.longitude], {\n        icon\n      }).addTo(mapInstanceRef.current).bindPopup(createPopupContent(ping));\n      markersRef.current.push(marker);\n    });\n\n    // Auto-fit map to show all pings\n    if (pings.length > 0) {\n      const group = new L.featureGroup(markersRef.current);\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\n    }\n  }, [pings]);\n  const getPingIcon = type => {\n    const iconConfig = {\n      iconSize: [32, 32],\n      iconAnchor: [16, 32],\n      popupAnchor: [0, -32]\n    };\n    switch (type) {\n      case 'here':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-here\">üìç</div>',\n          className: 'custom-ping-icon'\n        });\n      case 'meet':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-meet\">ü§ù</div>',\n          className: 'custom-ping-icon'\n        });\n      case 'sos':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-sos\">üÜò</div>',\n          className: 'custom-ping-icon'\n        });\n      default:\n        return new L.Icon.Default();\n    }\n  };\n  const createPopupContent = ping => {\n    const time = new Date(ping.timestamp).toLocaleString();\n    const typeEmoji = {\n      here: 'üìç',\n      meet: 'ü§ù',\n      sos: 'üÜò'\n    };\n    return `\n      <div class=\"ping-popup\">\n        <div class=\"ping-popup-header\">\n          <span class=\"ping-popup-icon\">${typeEmoji[ping.type] || 'üìç'}</span>\n          <span class=\"ping-popup-type\">${ping.type.toUpperCase()}</span>\n        </div>\n        ${ping.message ? `<div class=\"ping-popup-message\">${ping.message}</div>` : ''}\n        <div class=\"ping-popup-time\">${time}</div>\n      </div>\n    `;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"map-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 10\n  }, this);\n};\n_s(MapComponent, \"HfxYcnpQhQPTJOnowaWcPQZAg+0=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapComponent","pings","_s","mapRef","mapInstanceRef","markersRef","current","map","setView","tileLayer","attribution","maxZoom","addTo","remove","forEach","marker","removeLayer","ping","icon","getPingIcon","type","latitude","longitude","bindPopup","createPopupContent","push","length","group","featureGroup","fitBounds","getBounds","pad","iconConfig","iconSize","iconAnchor","popupAnchor","divIcon","html","className","time","Date","timestamp","toLocaleString","typeEmoji","here","meet","sos","toUpperCase","message","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jwono/Downloads/snowping-pwa/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport L from 'leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport './MapComponent.css'\n\n// Fix for default markers in Leaflet with React\ndelete L.Icon.Default.prototype._getIconUrl\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n})\n\nconst MapComponent = ({ pings = [] }) => {\n  const mapRef = useRef(null)\n  const mapInstanceRef = useRef(null)\n  const markersRef = useRef([])\n\n  useEffect(() => {\n    if (!mapInstanceRef.current && mapRef.current) {\n      // Initialize map\n      mapInstanceRef.current = L.map(mapRef.current).setView([-37.1, 147.1], 13)\n      \n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '¬© OpenStreetMap contributors',\n        maxZoom: 18,\n      }).addTo(mapInstanceRef.current)\n    }\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove()\n        mapInstanceRef.current = null\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!mapInstanceRef.current) return\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      mapInstanceRef.current.removeLayer(marker)\n    })\n    markersRef.current = []\n\n    // Add new markers\n    pings.forEach(ping => {\n      const icon = getPingIcon(ping.type)\n      const marker = L.marker([ping.latitude, ping.longitude], { icon })\n        .addTo(mapInstanceRef.current)\n        .bindPopup(createPopupContent(ping))\n\n      markersRef.current.push(marker)\n    })\n\n    // Auto-fit map to show all pings\n    if (pings.length > 0) {\n      const group = new L.featureGroup(markersRef.current)\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1))\n    }\n  }, [pings])\n\n  const getPingIcon = (type) => {\n    const iconConfig = {\n      iconSize: [32, 32],\n      iconAnchor: [16, 32],\n      popupAnchor: [0, -32],\n    }\n\n    switch (type) {\n      case 'here':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-here\">üìç</div>',\n          className: 'custom-ping-icon'\n        })\n      case 'meet':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-meet\">ü§ù</div>',\n          className: 'custom-ping-icon'\n        })\n      case 'sos':\n        return L.divIcon({\n          ...iconConfig,\n          html: '<div class=\"ping-marker ping-sos\">üÜò</div>',\n          className: 'custom-ping-icon'\n        })\n      default:\n        return new L.Icon.Default()\n    }\n  }\n\n  const createPopupContent = (ping) => {\n    const time = new Date(ping.timestamp).toLocaleString()\n    const typeEmoji = {\n      here: 'üìç',\n      meet: 'ü§ù',\n      sos: 'üÜò'\n    }\n    \n    return `\n      <div class=\"ping-popup\">\n        <div class=\"ping-popup-header\">\n          <span class=\"ping-popup-icon\">${typeEmoji[ping.type] || 'üìç'}</span>\n          <span class=\"ping-popup-type\">${ping.type.toUpperCase()}</span>\n        </div>\n        ${ping.message ? `<div class=\"ping-popup-message\">${ping.message}</div>` : ''}\n        <div class=\"ping-popup-time\">${time}</div>\n      </div>\n    `\n  }\n\n  return <div ref={mapRef} className=\"map-container\" />\n}\n\nexport default MapComponent"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AACjC,OAAO,oBAAoB;;AAE3B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAOF,CAAC,CAACG,IAAI,CAACC,OAAO,CAACC,SAAS,CAACC,WAAW;AAC3CN,CAAC,CAACG,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;AAEF,MAAMC,YAAY,GAAGA,CAAC;EAAEC,KAAK,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EACvC,MAAMC,MAAM,GAAGf,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMgB,cAAc,GAAGhB,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMiB,UAAU,GAAGjB,MAAM,CAAC,EAAE,CAAC;EAE7BD,SAAS,CAAC,MAAM;IACd,IAAI,CAACiB,cAAc,CAACE,OAAO,IAAIH,MAAM,CAACG,OAAO,EAAE;MAC7C;MACAF,cAAc,CAACE,OAAO,GAAGjB,CAAC,CAACkB,GAAG,CAACJ,MAAM,CAACG,OAAO,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC;MAE1EnB,CAAC,CAACoB,SAAS,CAAC,oDAAoD,EAAE;QAChEC,WAAW,EAAE,8BAA8B;QAC3CC,OAAO,EAAE;MACX,CAAC,CAAC,CAACC,KAAK,CAACR,cAAc,CAACE,OAAO,CAAC;IAClC;IAEA,OAAO,MAAM;MACX,IAAIF,cAAc,CAACE,OAAO,EAAE;QAC1BF,cAAc,CAACE,OAAO,CAACO,MAAM,CAAC,CAAC;QAC/BT,cAAc,CAACE,OAAO,GAAG,IAAI;MAC/B;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENnB,SAAS,CAAC,MAAM;IACd,IAAI,CAACiB,cAAc,CAACE,OAAO,EAAE;;IAE7B;IACAD,UAAU,CAACC,OAAO,CAACQ,OAAO,CAACC,MAAM,IAAI;MACnCX,cAAc,CAACE,OAAO,CAACU,WAAW,CAACD,MAAM,CAAC;IAC5C,CAAC,CAAC;IACFV,UAAU,CAACC,OAAO,GAAG,EAAE;;IAEvB;IACAL,KAAK,CAACa,OAAO,CAACG,IAAI,IAAI;MACpB,MAAMC,IAAI,GAAGC,WAAW,CAACF,IAAI,CAACG,IAAI,CAAC;MACnC,MAAML,MAAM,GAAG1B,CAAC,CAAC0B,MAAM,CAAC,CAACE,IAAI,CAACI,QAAQ,EAAEJ,IAAI,CAACK,SAAS,CAAC,EAAE;QAAEJ;MAAK,CAAC,CAAC,CAC/DN,KAAK,CAACR,cAAc,CAACE,OAAO,CAAC,CAC7BiB,SAAS,CAACC,kBAAkB,CAACP,IAAI,CAAC,CAAC;MAEtCZ,UAAU,CAACC,OAAO,CAACmB,IAAI,CAACV,MAAM,CAAC;IACjC,CAAC,CAAC;;IAEF;IACA,IAAId,KAAK,CAACyB,MAAM,GAAG,CAAC,EAAE;MACpB,MAAMC,KAAK,GAAG,IAAItC,CAAC,CAACuC,YAAY,CAACvB,UAAU,CAACC,OAAO,CAAC;MACpDF,cAAc,CAACE,OAAO,CAACuB,SAAS,CAACF,KAAK,CAACG,SAAS,CAAC,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC9D;EACF,CAAC,EAAE,CAAC9B,KAAK,CAAC,CAAC;EAEX,MAAMkB,WAAW,GAAIC,IAAI,IAAK;IAC5B,MAAMY,UAAU,GAAG;MACjBC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;MAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;MACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;IACtB,CAAC;IAED,QAAQf,IAAI;MACV,KAAK,MAAM;QACT,OAAO/B,CAAC,CAAC+C,OAAO,CAAC;UACf,GAAGJ,UAAU;UACbK,IAAI,EAAE,6CAA6C;UACnDC,SAAS,EAAE;QACb,CAAC,CAAC;MACJ,KAAK,MAAM;QACT,OAAOjD,CAAC,CAAC+C,OAAO,CAAC;UACf,GAAGJ,UAAU;UACbK,IAAI,EAAE,6CAA6C;UACnDC,SAAS,EAAE;QACb,CAAC,CAAC;MACJ,KAAK,KAAK;QACR,OAAOjD,CAAC,CAAC+C,OAAO,CAAC;UACf,GAAGJ,UAAU;UACbK,IAAI,EAAE,4CAA4C;UAClDC,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;QACE,OAAO,IAAIjD,CAAC,CAACG,IAAI,CAACC,OAAO,CAAC,CAAC;IAC/B;EACF,CAAC;EAED,MAAM+B,kBAAkB,GAAIP,IAAI,IAAK;IACnC,MAAMsB,IAAI,GAAG,IAAIC,IAAI,CAACvB,IAAI,CAACwB,SAAS,CAAC,CAACC,cAAc,CAAC,CAAC;IACtD,MAAMC,SAAS,GAAG;MAChBC,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE,IAAI;MACVC,GAAG,EAAE;IACP,CAAC;IAED,OAAO;AACX;AACA;AACA,0CAA0CH,SAAS,CAAC1B,IAAI,CAACG,IAAI,CAAC,IAAI,IAAI;AACtE,0CAA0CH,IAAI,CAACG,IAAI,CAAC2B,WAAW,CAAC,CAAC;AACjE;AACA,UAAU9B,IAAI,CAAC+B,OAAO,GAAG,mCAAmC/B,IAAI,CAAC+B,OAAO,QAAQ,GAAG,EAAE;AACrF,uCAAuCT,IAAI;AAC3C;AACA,KAAK;EACH,CAAC;EAED,oBAAOhD,OAAA;IAAK0D,GAAG,EAAE9C,MAAO;IAACmC,SAAS,EAAC;EAAe;IAAAY,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACvD,CAAC;AAAAnD,EAAA,CAtGKF,YAAY;AAAAsD,EAAA,GAAZtD,YAAY;AAwGlB,eAAeA,YAAY;AAAA,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}